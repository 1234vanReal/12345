<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>AI mit mehreren Erinnerungen</title>
    <style>
        body { background: #222; color: #fff; font-family: sans-serif; }
        #chat { width: 400px; margin: 50px auto; background: #333; border-radius: 8px; padding: 20px; }
        #messages { min-height: 200px; margin-bottom: 10px; }
        .user { color: #8ae234; }
        .ai { color: #729fcf; }
        input, button { font-size: 1em; }
    </style>
</head>
<body>
    <div id="chat">
        <div id="messages"></div>
        <input id="userInput" type="text" placeholder="Schreibe etwas..." autofocus>
        <button onclick="sendMessage()">Senden</button>
    </div>
    <script>
        const messagesDiv = document.getElementById('messages');
        const userInput = document.getElementById('userInput');
        let memories = [];

        function sendMessage() {
            const text = userInput.value.trim();
            if (!text) return;
            addMessage('user', text);
            userInput.value = '';
            setTimeout(() => {
                addMessage('ai', aiRespond(text));
            }, 500);
        }

        function addMessage(sender, text) {
            const msg = document.createElement('div');
            msg.className = sender;
            msg.textContent = (sender === 'user' ? 'Du: ' : 'AI: ') + text;
            messagesDiv.appendChild(msg);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        function aiRespond(input) {
            const lower = input.toLowerCase();

            // Mehrere Erinnerungen merken
            if (lower.startsWith("merke:")) {
                let content = input.slice(6).trim();
                if (content) {
                    memories.push(content);
                    return `Okay, ich merke mir: "${content}"`;
                } else {
                    return "Bitte schreibe nach 'merke:' was ich mir merken soll.";
                }
            }

            // Alle Erinnerungen ausgeben
            if (
                lower.includes("was hast du dir gemerkt") ||
                lower.includes("was kannst du dir merken") ||
                lower.includes("erinnere dich") ||
                lower.includes("erinnerst du dich") ||
                lower.includes("liste erinnerungen") ||
                lower.includes("zeig erinnerungen")
            ) {
                if (memories.length === 0) {
                    return "Ich habe mir noch nichts gemerkt.";
                }
                return "Das habe ich mir gemerkt:\n- " + memories.join("\n- ");
            }

            // Passende Erinnerung bei Schlagwort
            for (let memo of memories) {
                // Wenn das Stichwort in der Eingabe vorkommt, antworte mit dem passenden Memo
                let keyword = memo.split(" ")[0].toLowerCase();
                if (lower.includes(keyword)) {
                    return `Du hast mir dazu gesagt: "${memo}"`;
                }
            }

            // Standardantworten
            if (lower.includes('hallo') || lower.includes('hi')) {
                return "Hallo! Wie kann ich dir helfen?";
            }
            if (lower.includes('hilfe')) {
                return "Schreibe 'merke: <dein Text>' damit ich mir etwas merke! Frage: 'Was hast du dir gemerkt?' für alle Erinnerungen.";
            }

            return "Das habe ich nicht verstanden. Schreibe 'hilfe' für Tipps!";
        }

        userInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') sendMessage();
        });
    </script>
</body>
</html>
